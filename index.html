<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maba Survival Guide | UNIB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Vibrant Earth Tones -->
    <!-- Application Structure Plan: Versi final ini menyempurnakan arsitektur SPA dengan mengintegrasikan konten yang jauh lebih kaya. Struktur navigasi tetap, namun setiap halaman konten sekarang menggunakan komponen UI yang lebih canggih seperti modal untuk resep detail, akordeon untuk checklist, dan kartu info yang dirancang khusus (callout boxes). Penambahan utama adalah Floating Action Button (FAB) untuk memanggil "RafflesBot", sebuah chatbot berbasis aturan. Struktur ini dipilih untuk meningkatkan engagement dan menyediakan bantuan instan tanpa meninggalkan halaman utama, menjadikannya sebuah 'dashboard' kehidupan maba yang sesungguhnya. -->
    <!-- Visualization & Content Choices:
        - Detailed Checklist: Report Info -> Kebutuhan kos. Goal -> Mengorganisir. Viz/Method -> Akordeon yang dapat diciutkan per kategori. Interaction -> Centang item, status tersimpan. Justification -> Mengelola daftar panjang secara efisien. Library/Method -> HTML/JS/LocalStorage.
        - Recipe Modal: Report Info -> Resep lengkap. Goal -> Menginstruksikan. Viz/Method -> Kartu resep yang saat diklik memunculkan modal dengan detail lengkap (bahan & langkah). Interaction -> Klik untuk detail. Justification -> Menjaga antarmuka utama tetap bersih sambil menyediakan informasi mendalam sesuai permintaan. Library/Method -> HTML/CSS/JS.
        - Enhanced RafflesBot: Report Info -> FAQ Maba. Goal -> Membantu & Menghibur. Viz/Method -> Modal Chat UI. Interaction -> Menu opsi yang lebih beragam, termasuk saran eksplorasi & kontak darurat. Justification -> Meningkatkan peran bot sebagai asisten virtual yang benar-benar berguna. Library/Method -> HTML/CSS/JS.
        - Callout Boxes: Report Info -> Tips spesifik. Goal -> Menekankan info penting. Viz/Method -> Kartu dengan gaya visual yang berbeda (ikon, warna batas). Interaction -> Statis. Justification -> Meniru elemen desain yang efektif dari dokumen asli untuk menarik perhatian ke tips kunci. Library/Method -> HTML/CSS.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        :root {
            --primary: #E2725B;
            --secondary: #2C5282;
            --background: #F7FAFC;
            --text-dark: #2D3748;
            --text-light: #718096;
            --card-bg: #FFFFFF;
        }
        html { scroll-behavior: smooth; }
        body { font-family: 'Nunito Sans', sans-serif; background-color: var(--background); color: var(--text-dark); }
        h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; color: var(--text-dark); }
        .nav-link.active { background-color: var(--primary); color: white; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .nav-link:not(.active):hover { background-color: #FED7D7; color: var(--primary); }
        .chart-container { position: relative; width: 100%; max-width: 400px; margin: auto; height: 400px; }
        .checklist-item label:has(input:checked) span { text-decoration: line-through; color: var(--text-light); }
        .callout { padding: 1rem; border-left-width: 4px; border-radius: 0.25rem; margin-top: 1rem; }
        .callout-info { border-color: #63B3ED; background-color: #EBF8FF; }
        .callout-warning { border-color: #F6AD55; background-color: #FFFAF0; }
        .callout-note { border-color: #48BB78; background-color: #F0FFF4; }
        
        /* Modal Styles */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 2000; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        .modal-overlay.open { opacity: 1; pointer-events: auto; }
        .modal-content { background: white; padding: 2rem; border-radius: 0.75rem; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; transform: scale(0.95); transition: transform 0.3s ease; }
        .modal-overlay.open .modal-content { transform: scale(1); }

        /* RafflesBot Styles */
        #rafflesbot-fab { position: fixed; bottom: 80px; right: 20px; md:bottom: 20px; z-index: 1000; }
        #rafflesbot-fab button { background-color: var(--secondary); color: white; width: 60px; height: 60px; border-radius: 50%; box-shadow: 0 4px 12px rgba(0,0,0,0.2); transition: transform 0.2s; }
        #rafflesbot-fab button:hover { transform: scale(1.1); }
        #rafflesbot-container { position: fixed; bottom: 150px; right: 20px; md:bottom: 100px; width: 90%; max-width: 380px; height: 70vh; max-height: 500px; background-color: white; border-radius: 16px; box-shadow: 0 8px 24px rgba(0,0,0,0.15); z-index: 999; transform: scale(0.95) translateY(20px); opacity: 0; transition: all 0.3s ease-out; pointer-events: none; }
        #rafflesbot-container.open { transform: scale(1) translateY(0); opacity: 1; pointer-events: auto; }
        .bot-message { background-color: #EBF8FF; align-self: flex-start; }
        .user-message { background-color: #E2E8F0; align-self: flex-end; }
        .bot-option button { border: 1px solid var(--secondary); color: var(--secondary); transition: all 0.2s; }
        .bot-option button:hover { background-color: var(--secondary); color: white; }
    </style>
</head>
<body class="flex flex-col md:flex-row min-h-screen">

    <!-- Sidebar / Bottom Nav -->
    <aside class="w-full md:w-64 bg-white md:border-r border-gray-200 shrink-0 md:flex flex-col fixed bottom-0 md:relative z-50">
        <div class="p-6 hidden md:block">
            <h2 class="text-2xl font-bold text-center">Maba Guide</h2>
            <p class="text-sm text-gray-500 text-center">Edisi Anak Kos UNIB</p>
        </div>
        <nav class="flex flex-row md:flex-col justify-around md:justify-start p-2 bg-white border-t md:border-t-0">
            <a href="#mulai" class="nav-link flex flex-col md:flex-row items-center gap-1 md:gap-3 rounded-lg p-2 md:p-3 font-semibold mb-0 md:mb-2 active">
                <span class="text-2xl">üöÄ</span> <span class="text-xs md:text-base">Mulai</span>
            </a>
            <a href="#homesick" class="nav-link flex flex-col md:flex-row items-center gap-1 md:gap-3 rounded-lg p-2 md:p-3 font-semibold mb-0 md:mb-2">
                <span class="text-2xl">‚ù§Ô∏è</span> <span class="text-xs md:text-base">Homesick</span>
            </a>
            <a href="#dapur" class="nav-link flex flex-col md:flex-row items-center gap-1 md:gap-3 rounded-lg p-2 md:p-3 font-semibold mb-0 md:mb-2">
                <span class="text-2xl">üç≥</span> <span class="text-xs md:text-base">Dapur</span>
            </a>
            <a href="#gaul" class="nav-link flex flex-col md:flex-row items-center gap-1 md:gap-3 rounded-lg p-2 md:p-3 font-semibold mb-0 md:mb-2">
                <span class="text-2xl">üó£Ô∏è</span> <span class="text-xs md:text-base">Gaul</span>
            </a>
            <a href="#kontak" class="nav-link flex flex-col md:flex-row items-center gap-1 md:gap-3 rounded-lg p-2 md:p-3 font-semibold">
                <span class="text-2xl">üß†</span> <span class="text-xs md:text-base">Jaga Diri</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-4 sm:p-6 md:p-8 overflow-y-auto mb-20 md:mb-0">

        <!-- Section: Mulai Di Sini -->
        <section id="mulai" class="content-section">
            <h1 class="text-4xl font-bold mb-2">Selamat Datang di Bengkulu, Kawan!</h1>
            <p class="mb-6 text-gray-600">Perjuanganmu sampai di titik ini keren banget. Wajar kalau cemas, tapi tenang, kamu nggak sendirian. Aplikasi ini adalah temanmu, dan kalau bingung, panggil aja RafflesBot di pojok kanan bawah!</p>
            <div class="callout callout-info">
                <h4 class="font-bold">Kata-Kata Penguat Untukmu üí™</h4>
                <ul class="list-disc list-inside text-sm mt-2">
                    <li>Kamu lebih kuat dari yang kamu kira.</li>
                    <li>Setiap langkah kecil di kota baru ini adalah sebuah kemenangan.</li>
                    <li>Bingung itu wajar. Bertanya itu pintar. Sendirian itu cuma sementara.</li>
                </ul>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-6 mt-6">
                <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="text-2xl font-bold mb-4">Checklist Wajib Anak Kos</h3>
                    <div id="checklist-container" class="space-y-2"></div>
                     <div class="callout callout-warning">
                        <h4 class="font-bold">‚ö†Ô∏è Awas Miss Ini!</h4>
                        <p class="text-sm mt-1">Jangan beli perabotan besar sebelum ukur kamar kos! Bawa meteran pas survei. Cek juga daya listrik kosan sebelum beli elektronik, biar nggak jeglek pas nugas.</p>
                    </div>
                </div>
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="text-2xl font-bold mb-4 text-center">Estimasi Budget Awal</h3>
                    <p class="text-center text-sm text-gray-500 mb-4">Perkiraan biaya untuk membeli perlengkapan kos mendasar di Bengkulu.</p>
                    <div class="chart-container"><canvas id="budgetChart"></canvas></div>
                </div>
            </div>
        </section>

        <!-- Section: Anti-Homesick -->
        <section id="homesick" class="hidden content-section">
            <h1 class="text-4xl font-bold mb-2">Panduan Anti-Homesick</h1>
            <p class="mb-8 text-gray-600">Rindu rumah itu bukan tanda kamu lemah. Yuk, kita ubah rasa kangen itu jadi energi untuk menjelajahi rumah barumu di Bengkulu!</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                 <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="font-bold text-xl mb-3">üö® Pertolongan Pertama</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><strong>Video Call Terjadwal:</strong> Jangan cuma nelepon pas sedih.</li>
                        <li><strong>Bawa 'Jimat' Rumah:</strong> Pajang foto atau pakai selimut dari rumah.</li>
                        <li><strong>Cry It Out:</strong> Nangis aja gak papa, setelah itu biasanya lega.</li>
                        <li><strong>Tulis Jurnal:</strong> Tuangkan semua perasaanmu biar nggak sesak.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="font-bold text-xl mb-3">üó∫Ô∏è Misi Eksplorasi Mingguan</h3>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700">
                        <li>Jalan sore gratis ke <strong>Pantai Panjang</strong> liat sunset.</li>
                        <li>Nugas di kafe baru area UNIB, misal <strong>Bootchin Cafe</strong>.</li>
                        <li>Ajak teman baru coba prasmanan <strong>Makan Mano</strong>.</li>
                        <li>Jelajahi <strong>Benteng Marlborough</strong>, wisata sejarah keren.</li>
                    </ol>
                </div>
            </div>
             <div class="callout callout-note mt-6">
                <h4 class="font-bold">üí° Kutipan Untukmu</h4>
                <p class="text-sm mt-1 italic">"Rumah bukan lagi sekadar tempat, tapi perasaan. Dan sekarang, tugasmu adalah membangun 'rasa rumah' itu di sini, di Bengkulu."</p>
            </div>
        </section>

        <!-- Section: Dapur Anak Kos -->
        <section id="dapur" class="hidden content-section">
             <h1 class="text-4xl font-bold mb-2">Dapur Anak Kos Anti-Boncos</h1>
             <p class="mb-8 text-gray-600">Menguasai resep sederhana adalah kunci bertahan hidup. Klik resep di bawah untuk melihat cara masak lengkapnya!</p>
             <div id="recipe-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </section>

        <!-- Section: Gaul -->
        <section id="gaul" class="hidden content-section">
            <h1 class="text-4xl font-bold mb-2">Kamus Gaul & Icebreaker</h1>
            <p class="mb-8 text-gray-600">Biar nggak 'krik-krik' pas ngobrol, pelajari bahasa lokal dan pakai icebreaker ini buat mulai percakapan.</p>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-2xl font-bold mb-4">Kamus Gaul Wajib Maba</h3>
                    <input type="text" id="kamus-search" placeholder="Cari istilah gaul Bengkulu..." class="w-full p-3 mb-4 rounded-lg border-2 border-gray-300 focus:ring-2 focus:ring-[var(--primary)] focus:border-[var(--primary)] transition">
                    <div id="kamus-list" class="grid grid-cols-2 gap-4"></div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="text-2xl font-bold mb-4">Pembuka Obrolan Anti-Canggung</h3>
                    <ul class="list-disc list-inside space-y-3 text-gray-700">
                        <li><strong>Di Kelas:</strong> "Eh, kenalin, gue [Nama]. Lo ngerti nggak tadi penjelasan dosen soal [Topik]?"</li>
                        <li><strong>Di Kosan:</strong> "Kak, numpang nanya dong. Ada rekomendasi warung makan murah yang alap deket sini nggak?"</li>
                        <li><strong>Di Mana Saja:</strong> "Lo asalnya dari mana? Gue dari [Kota], baru pertama kali ke Bengkulu."</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section: Kontak & Jaga Diri -->
        <section id="kontak" class="hidden content-section">
            <h1 class="text-4xl font-bold mb-2">Jaga Diri & Kontak Penting</h1>
            <p class="mb-8 text-gray-600">Kesehatan mentalmu itu prioritas. Jangan ragu cari bantuan. Simpan juga kontak penting ini di HP-mu.</p>
             <div class="callout callout-warning mb-6">
                <h4 class="font-bold">‚ö†Ô∏è Kapan Harus Cari Bantuan?</h4>
                <p class="text-sm mt-1">Jika kamu merasa cemas/sedih berlebihan, sulit tidur, dan kehilangan minat pada banyak hal selama berhari-hari, mungkin ini saatnya bicara dengan profesional. Ini normal dan tanda kamu kuat.</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm">
                <h3 class="text-2xl font-bold mb-4">Direktori Penting UNIB</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="bg-gray-100">
                            <tr><th class="p-2 text-left">Layanan</th><th class="p-2 text-left">Kontak</th><th class="p-2 text-left">Fungsi</th></tr>
                        </thead>
                        <tbody>
                            <tr class="border-b"><td class="p-2 font-bold">Kesmawa UNIB</td><td class="p-2">Ibu Martha: 08113450057</td><td class="p-2">SUPER PENTING: Info beasiswa, KIP-K, dan layanan konseling.</td></tr>
                            <tr class="border-b"><td class="p-2 font-bold">Perpustakaan</td><td class="p-2">library.unib.ac.id</td><td class="p-2">Pinjam buku, nugas di tempat adem.</td></tr>
                            <tr><td class="p-2 font-bold">Puskes Mahasiswa</td><td class="p-2">Gedung Rektorat</td><td class="p-2">Klinik jika sakit atau butuh surat izin.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal Container -->
    <div id="modal-container" class="modal-overlay"></div>

    <!-- RafflesBot FAB -->
    <div id="rafflesbot-fab">
        <button id="open-rafflesbot" class="flex items-center justify-center text-3xl animate-bounce">
            üå∏
        </button>
    </div>

    <!-- RafflesBot Modal -->
    <div id="rafflesbot-container" class="flex flex-col">
        <div class="p-4 bg-[var(--secondary)] text-white rounded-t-lg flex items-center gap-3">
            <span class="text-2xl">üå∏</span>
            <div><h3 class="font-bold">RafflesBot</h3><p class="text-xs">Teman Digital Maba UNIB</p></div>
        </div>
        <div id="rafflesbot-chat-window" class="flex-1 p-4 overflow-y-auto flex flex-col gap-3"></div>
        <div id="rafflesbot-options" class="p-4 border-t border-gray-200"></div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- DATA ---
        const checklistData = {
            "Zona Tidur & Belajar": ["Kasur", "Bantal & Guling", "Sprei (2 set)", "Meja & Kursi Belajar", "Lampu Belajar", "Terminal Listrik"],
            "Zona Dapur Mini": ["Rice Cooker", "Peralatan Makan", "Botol Minum", "Sabun Cuci Piring"],
            "Zona Mandi & Kebersihan": ["Peralatan Mandi", "Handuk (2)", "Deterjen", "Sapu & Pel"],
            "Zona Penting Lainnya": ["Obat Pribadi & P3K", "Dokumen Penting", "Gembok", "Payung/Jas Hujan"]
        };
        const recipes = [
            { title: "Nasi Goreng Sat Set", level: "Pemula", ingredients: ["1 piring nasi sisa", "1 butir telur", "2 siung bawang putih", "2 sdm kecap manis", "Garam"], steps: ["Panaskan minyak, buat telur orak-arik.", "Tumis bawang putih sampai wangi.", "Masukkan nasi, aduk sampai pecah.", "Campurkan telur, tuang kecap & garam.", "Aduk rata, koreksi rasa, sajikan."] },
            { title: "Mie Instan Naik Kelas", level: "Pemula", ingredients: ["1 bks mie instan", "1 butir telur", "Sawi hijau", "Cabe rawit"], steps: ["Rebus mie setengah matang, tiriskan.", "Masukkan mie & bumbu ke sisa air.", "Masukkan telur, aduk cepat.", "Masukkan sawi & cabe, masak sebentar.", "Angkat dan sajikan."] },
            { title: "Ikan Sambal Caluk", level: "Cita Rasa Lokal", ingredients: ["2 ekor ikan kembung", "1 bks bumbu instan", "Bahan Sambal: 5 cabe, 1 bawang, 1/2 tomat, 1 sdt caluk bakar"], steps: ["Lumuri ikan dengan bumbu instan.", "Goreng ikan hingga garing.", "Ulek kasar semua bahan sambal.", "Siram sambal dengan minyak panas.", "Sajikan ikan dengan nasi hangat dan sambal."] }
        ];
        const kamusGaul = [
            { term: "Kito/Awak", meaning: "Kita / Saya" }, { term: "Pacak", meaning: "Bisa, mampu" },
            { term: "Nian", meaning: "Banget, sekali" }, { term: "Karut", meaning: "Kacau, jelek" },
            { term: "Alap", meaning: "Bagus, cakep" }, { term: "Dempo", meaning: "Demi apa?" },
            { term: "Ningpa", meaning: "Pusing kepala" }, { term: "Peh", meaning: "Yuk, ayo" }
        ];
        const botResponses = {
            'makan': "Laper ya? Di UNIB Belakang banyak banget pilihan! Coba deh <strong>Makan Mano</strong> (prasmanan murah) atau cari <strong>Seblak Prasmanan</strong>. Dijamin kenyang!",
            'homesick': "Wajar banget kangen rumah! Coba deh keluar kamar, jalan-jalan sore ke <strong>Pantai Panjang</strong>. Dengerin suara ombak bisa nenangin pikiran, lho. Semangat!",
            'gaul': "Biar cepet akrab, coba pakai kata ini: <strong>'Peh'</strong> (artinya 'yuk'). Contoh: 'Peh, makan peh, laper nian!'. Pasti langsung nyambung!",
            'kontak': "Kalau ada urusan penting soal beasiswa atau butuh konseling, langsung hubungi <strong>Kesmawa UNIB</strong> ya. Kontak Ibu Martha di 08113450057. Jangan ragu!",
            'default': "Duh, maaf nian, RafflesBot belum ngerti itu. Coba pilih salah satu topik di bawah ini ya, kito belajar bareng-bareng!"
        };
        const initialOptions = [
            { text: " rekomendasi makan murah!", key: 'makan' },
            { text: " lagi homesick nih...", key: 'homesick' },
            { text: " ajarin bahasa gaul dong!", key: 'gaul' },
            { text: " butuh kontak penting!", key: 'kontak' }
        ];

        // --- NAVIGATION ---
        const navLinks = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');
        function switchTab(hash) {
            contentSections.forEach(section => section.classList.toggle('hidden', '#' + section.id !== hash));
            navLinks.forEach(link => link.classList.toggle('active', link.getAttribute('href') === hash));
        }
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const hash = e.currentTarget.getAttribute('href');
                switchTab(hash);
                window.location.hash = hash;
            });
        });

        // --- CHECKLIST ---
        const checklistContainer = document.getElementById('checklist-container');
        let checkedItems = JSON.parse(localStorage.getItem('unibMabaChecklist')) || [];
        Object.entries(checklistData).forEach(([category, items]) => {
            const details = document.createElement('details');
            details.className = 'bg-gray-50 rounded';
            details.innerHTML = `<summary class="font-semibold p-3 cursor-pointer">${category}</summary><div class="p-3 border-t border-gray-200 grid grid-cols-1 sm:grid-cols-2 gap-2 accordion-content"></div>`;
            const itemsDiv = details.querySelector('div');
            items.forEach(item => {
                const isChecked = checkedItems.includes(item);
                itemsDiv.innerHTML += `<div class="checklist-item"><label class="flex items-center cursor-pointer"><input type="checkbox" data-item="${item}" class="h-5 w-5 rounded border-gray-300 text-[var(--primary)] focus:ring-[var(--primary)]" ${isChecked ? 'checked' : ''}><span class="ml-3 text-sm">${item}</span></label></div>`;
            });
            checklistContainer.appendChild(details);
        });
        checklistContainer.addEventListener('change', (e) => {
            if (e.target.type === 'checkbox') {
                const item = e.target.dataset.item;
                if (e.target.checked) {
                    if (!checkedItems.includes(item)) checkedItems.push(item);
                } else {
                    checkedItems = checkedItems.filter(i => i !== item);
                }
                localStorage.setItem('unibMabaChecklist', JSON.stringify(checkedItems));
            }
        });

        // --- BUDGET CHART ---
        const ctx = document.getElementById('budgetChart').getContext('2d');
        const budgetData = {
            labels: ['Elektronik (Rp 350rb)', 'Perlengkapan Tidur (Rp 450rb)', 'Peralatan Makan (Rp 75rb)', 'Kebersihan (Rp 125rb)', 'Penyimpanan (Rp 225rb)'],
            data: [350000, 450000, 75000, 125000, 225000],
        };
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: budgetData.labels,
                datasets: [{
                    label: 'Estimasi Budget',
                    data: budgetData.data,
                    backgroundColor: ['#E2725B', '#2C5282', '#F6AD55', '#48BB78', '#9F7AEA'],
                    borderColor: 'var(--card-bg)',
                    borderWidth: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { font: { size: 10 } } },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label.split('(')[0].trim();
                                if (context.parsed !== null) {
                                    label += ': ' + new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(context.parsed);
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });
        
        // --- RECIPES ---
        const recipeContainer = document.getElementById('recipe-container');
        const modalContainer = document.getElementById('modal-container');
        recipes.forEach((recipe, index) => {
            const card = document.createElement('div');
            card.className = "bg-white p-4 rounded-xl shadow-sm hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer";
            card.innerHTML = `<h4 class="font-bold text-lg">${recipe.title}</h4><p class="text-sm text-gray-500">Level: ${recipe.level}</p>`;
            card.onclick = () => showRecipeModal(index);
            recipeContainer.appendChild(card);
        });

        function showRecipeModal(index) {
            const recipe = recipes[index];
            modalContainer.innerHTML = `
                <div class="modal-content">
                    <h3 class="text-2xl font-bold mb-4">${recipe.title}</h3>
                    <div class="grid md:grid-cols-2 gap-6 text-sm">
                        <div>
                            <h4 class="font-bold mb-2">Bahan-bahan:</h4>
                            <ul class="list-disc list-inside space-y-1">${recipe.ingredients.map(i => `<li>${i}</li>`).join('')}</ul>
                        </div>
                        <div>
                            <h4 class="font-bold mb-2">Cara Masak:</h4>
                            <ol class="list-decimal list-inside space-y-1">${recipe.steps.map(s => `<li>${s}</li>`).join('')}</ol>
                        </div>
                    </div>
                    <button id="close-modal" class="mt-6 bg-[var(--primary)] text-white px-4 py-2 rounded-lg w-full">Tutup</button>
                </div>`;
            modalContainer.classList.add('open');
            document.getElementById('close-modal').onclick = () => modalContainer.classList.remove('open');
        }
        modalContainer.addEventListener('click', (e) => { if (e.target === modalContainer) modalContainer.classList.remove('open'); });

        // --- KAMUS GAUL ---
        const kamusList = document.getElementById('kamus-list');
        const kamusSearch = document.getElementById('kamus-search');
        function renderKamus(filter = '') {
            const filtered = kamusGaul.filter(item => item.term.toLowerCase().includes(filter.toLowerCase()) || item.meaning.toLowerCase().includes(filter.toLowerCase()));
            kamusList.innerHTML = filtered.map(item => `<div class="bg-gray-50 p-3 rounded-lg"><p class="font-bold">${item.term}</p><p class="text-sm text-gray-600">${item.meaning}</p></div>`).join('') || '<p class="text-sm text-gray-500 col-span-2">Tidak ditemukan.</p>';
        }
        kamusSearch.addEventListener('input', (e) => renderKamus(e.target.value));
        
        // --- RAFFLESBOT ---
        const fab = document.getElementById('open-rafflesbot');
        const botContainer = document.getElementById('rafflesbot-container');
        const chatWindow = document.getElementById('rafflesbot-chat-window');
        const optionsContainer = document.getElementById('rafflesbot-options');
        fab.addEventListener('click', () => botContainer.classList.toggle('open'));
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `p-3 rounded-lg max-w-[80%] text-sm ${sender === 'bot' ? 'bot-message' : 'user-message'}`;
            messageDiv.innerHTML = text;
            chatWindow.appendChild(messageDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        function showOptions(options) {
            optionsContainer.innerHTML = '';
            const optionsWrapper = document.createElement('div');
            optionsWrapper.className = 'grid grid-cols-2 gap-2';
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'p-2 rounded-lg text-xs bot-option';
                btn.innerHTML = `üå∏ ${opt.text}`;
                btn.onclick = () => handleOptionClick(opt);
                optionsWrapper.appendChild(btn);
            });
            optionsContainer.appendChild(optionsWrapper);
        }
        function handleOptionClick(option) {
            addMessage(option.text, 'user');
            optionsContainer.innerHTML = '<p class="text-center text-xs text-gray-400">RafflesBot lagi mikir...</p>';
            setTimeout(() => {
                addMessage(botResponses[option.key] || botResponses['default'], 'bot');
                showOptions(initialOptions);
            }, 1000);
        }

        // --- INITIAL LOAD ---
        const initialHash = window.location.hash || '#mulai';
        switchTab(initialHash);
        renderKamus();
        addMessage("Hai, kawan maba! Aku RafflesBot. Ada yang bisa dibantu?", 'bot');
        showOptions(initialOptions);
    });
    </script>
</body>
</html>
